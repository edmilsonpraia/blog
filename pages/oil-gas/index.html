<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petr√≥leo e G√°s - Blog Multilingue</title>
    
    <!-- Favicon -->
    <link rel="icon" href="../../favicon.svg" type="image/svg+xml">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link id="theme-style" rel="stylesheet" href="../../css/themes/light.css">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <header class="main-header">
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="../../index.html">
                    <img src="../../assets/images/Logomarca_00.png" alt="Justifica√ß√µes Acad√™micas" height="60" class="d-inline-block align-top">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../../index.html">Home</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="englishDropdown" role="button" data-bs-toggle="dropdown">
                                Ingl√™s
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="../english/grammar.html">Gram√°tica</a></li>
                                <li><a class="dropdown-item" href="../english/publications.html">Publica√ß√µes</a></li>
                               
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="medicineDropdown" role="button" data-bs-toggle="dropdown">
                                Medicina
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="../medicine/research.html">Pesquisas</a></li>
                                <li><a class="dropdown-item" href="../medicine/publications.html">Publica√ß√µes</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle active" href="#" id="oilGasDropdown" role="button" data-bs-toggle="dropdown">
                                Petr√≥leo e G√°s
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="../oil-gas/innovations.html">Inova√ß√µes</a></li>
                                <li><a class="dropdown-item" href="../oil-gas/publications.html">Publica√ß√µes</a></li>
                            </ul>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="engineeringDropdown" role="button" data-bs-toggle="dropdown">
                                Engenharias
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="../engineering/computer.html">Computa√ß√£o</a></li>
                                <li><a class="dropdown-item" href="../engineering/publications.html">Publica√ß√µes</a></li>
                               
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../misc/index.html">Diversos</a>
                        </li>
                    </ul>
                    <div class="d-flex">
                        <button id="theme-toggle" class="btn btn-sm btn-outline-secondary me-2">
                            <span class="theme-icon">üåô</span>
                        </button>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-primary active language-btn" data-lang="pt">PT</button>
                            <button class="btn btn-sm btn-outline-primary language-btn" data-lang="en">EN</button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container my-4">
        <h1 class="mb-4">Petr√≥leo e G√°s</h1>
        
        <div class="row">
            <div class="col-md-8">
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">Bem-vindo √† se√ß√£o de Petr√≥leo e G√°s</h2>
                        <p class="card-text">
                            Esta se√ß√£o √© dedicada ao conhecimento e terminologia especializada da ind√∫stria de Petr√≥leo e G√°s em m√∫ltiplos idiomas, 
                            oferecendo recursos para estudantes, profissionais e entusiastas que desejam 
                            aprimorar suas habilidades lingu√≠sticas no contexto desta importante ind√∫stria.
                        </p>
                        <p class="card-text">
                            Aqui voc√™ encontrar√° artigos sobre avan√ßos tecnol√≥gicos, processos industriais, 
                            gloss√°rios t√©cnicos e materiais especializados para dominar a comunica√ß√£o t√©cnica 
                            em ingl√™s e outros idiomas no setor de Petr√≥leo e G√°s.
                        </p>
                    </div>
                </div>



                <!-- Artigos Recentes - Vers√£o Din√¢mica -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Artigos Recentes</h3>
                    </div>
                    <div class="card-body">
                        <div class="list-group" id="recent-articles-container">
                            <!-- Conte√∫do ser√° carregado dinamicamente -->
                            <div class="text-center py-3" id="no-articles-message">
                                <p class="text-muted">Nenhum artigo publicado recentemente.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <!-- Categorias -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Categorias</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="industry.html" class="text-decoration-none">Ind√∫stria</a>
                                <span class="badge bg-primary rounded-pill">14</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="terminology.html" class="text-decoration-none">Terminologia</a>
                                <span class="badge bg-primary rounded-pill">21</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="innovations.html" class="text-decoration-none">Inova√ß√µes</a>
                                <span class="badge bg-primary rounded-pill">9</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <a href="publications.html" class="text-decoration-none">Publica√ß√µes</a>
                                <span class="badge bg-primary rounded-pill">7</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Recursos Populares -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3>Recursos Populares</h3>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <a href="#" class="text-decoration-none">Gloss√°rio T√©cnico Ingl√™s-Portugu√™s</a>
                            </li>
                            <li class="list-group-item">
                                <a href="#" class="text-decoration-none">Guia de Abreviaturas do Setor</a>
                            </li>
                            <li class="list-group-item">
                                <a href="#" class="text-decoration-none">Termos de Equipamentos de Perfura√ß√£o</a>
                            </li>
                            <li class="list-group-item">
                                <a href="#" class="text-decoration-none">Express√µes para Relat√≥rios T√©cnicos</a>
                            </li>
                            <li class="list-group-item">
                                <a href="#" class="text-decoration-none">Vocabul√°rio de HSE (Sa√∫de, Seguran√ßa e Meio Ambiente)</a>
                            </li>
                        </ul>
                    </div>
                </div>



                <!-- Contato via WhatsApp (substituindo a Newsletter) -->
                <div class="card">
                    <div class="card-header">
                        <h3>Entre em Contato Conosco</h3>
                    </div>
                    <div class="card-body">
                        <p>Envie uma mensagem para tirar suas d√∫vidas ou solicitar informa√ß√µes.</p>
                        <p>Estamos dispon√≠veis para responder suas perguntas sobre nossos materiais e servi√ßos.</p>
                        <div class="d-grid">
                            <a href="https://wa.me/+79961007408" target="_blank" class="btn btn-success">
                                <i class="bi bi-whatsapp me-2"></i>Contato via WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>Justifica√ß√µes Acad√™micas</h5>
                    <p>Somos eternos apendizes</p>
                </div>
                <div class="col-md-4">
                    <h5>Links R√°pidos</h5>
                    <ul class="list-unstyled">
                        <li><a href="../../index.html" class="text-light">Home</a></li>
                        <li><a href="" class="text-light">contacto: +7 996 100 74 08</a></li>
                        <li><a href="#" class="text-light"></a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h5>Contato</h5>
                    <p>Email: justificacoesacademicas@gmail.com</p>
                    <div class="social-media">
                        <a href="https://www.facebook.com/share/19XAayVoKb/?mibextid=wwXIfr" class="text-light me-3" target="_blank">
                            <i class="bi bi-facebook fs-4"></i>
                        </a>
                        <a href="https://www.instagram.com/justificacoes_academicas_?igsh=Ym9qa3F2cDU5YTlm&utm_source=qr" class="text-light me-3" target="_blank">
                            <i class="bi bi-instagram fs-4"></i>
                        </a>
                        <a href="https://youtube.com/@justificacoesacademicas?si=asbgXUxZPTC-73wq" class="text-light me-3" target="_blank">
                            <i class="bi bi-youtube fs-4"></i>
                        </a>
                        <a href="https://chat.whatsapp.com/EvNGxDj3fagINGtBsH6piL" class="text-light me-3" target="_blank">
                            <i class="bi bi-whatsapp fs-4"></i>
                        </a>
                        <a href="https://justificacoesacademicas.org" class="text-light" target="_blank">
                            <i class="bi bi-globe fs-4"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col text-center">
                    <p>&copy; 2025 Justifica√ß√µes Acad√™micas. <span data-translate="footer_rights">Todos os direitos reservados.</span></p>
                </div>
            </div>
        </div>
    </footer>
    <!-- Adicionar script do Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script src="../../js/components/translator.js"></script>
    
    <!-- Script para carregamento de artigos de Petr√≥leo e G√°s -->
    <script>
    // Configura√ß√£o do Supabase
    const SUPABASE_URL = 'https://lvegldhtgalibbkmhzfz.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2ZWdsZGh0Z2FsaWJia21oemZ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM2ODQzOTcsImV4cCI6MjA1OTI2MDM5N30.mS069eiTid0_l067PRZPD_3a7v-GJrvxQNCTCRuNpYw';
    let supabase = null;

    document.addEventListener('DOMContentLoaded', function() {
        console.log('Iniciando carregamento de conte√∫do espec√≠fico de Petr√≥leo e G√°s');
        
        // Inicializar o cliente Supabase
        initializeSupabase();
        
        // Carregar dados do localStorage como fallback
        loadArticlesFromLocalStorage();
    });

    /**
     * Inicializa o cliente Supabase
     */
    function initializeSupabase() {
        console.log('Inicializando cliente Supabase para p√°gina de Petr√≥leo e G√°s');
        
        try {
            // Verificar se o Supabase j√° est√° dispon√≠vel no window global
            if (window.supabase) {
                console.log('Objeto supabase j√° dispon√≠vel globalmente');
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                loadArticlesFromSupabase();
                return;
            }
            
            // Verificar outras formas de acesso
            if (typeof window.supabase !== 'undefined' && typeof window.supabase.createClient === 'function') {
                console.log('Usando window.supabase.createClient');
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                loadArticlesFromSupabase();
                return;
            } 
            else if (typeof createClient === 'function') {
                console.log('Usando createClient global');
                supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
                loadArticlesFromSupabase();
                return;
            }
            
            console.error('Biblioteca Supabase n√£o encontrada ou n√£o inicializada corretamente');
        } catch (error) {
            console.error('Erro ao inicializar o cliente Supabase:', error);
        }
    }

    /**
     * Carrega artigos recentes do Supabase
     */
    async function loadArticlesFromSupabase() {
        console.log('Carregando artigos recentes de Petr√≥leo e G√°s do Supabase');
        
        try {
            if (!supabase) {
                console.error('Cliente Supabase n√£o inicializado');
                return;
            }
            
            // Buscar artigos da categoria petr√≥leo e g√°s
            const { data: articles, error } = await supabase
                .from('articles')
                .select('*')
                .eq('status', 'publicado')
                .eq('category', 'petroleo-gas')
                .order('date', { ascending: false })
                .limit(4);
            
            if (error) {
                console.error('Erro ao buscar artigos do Supabase:', error);
                return;
            }
            
            console.log(`Carregados ${articles?.length || 0} artigos do Supabase`);
            
            // Exibir artigos na p√°gina
            if (articles && articles.length > 0) {
                displayArticles(articles);
            }
        } catch (error) {
            console.error('Erro ao carregar artigos do Supabase:', error);
        }
    }

    /**
     * Carrega artigos do localStorage (como fallback)
     */
    function loadArticlesFromLocalStorage() {
        console.log('Buscando artigos do localStorage (fallback)');
        
        try {
            // Obter artigos do localStorage
            const articlesData = JSON.parse(localStorage.getItem('blogArticles') || '[]');
            
            // Filtrar apenas artigos da categoria "petr√≥leo e g√°s"
            const oilGasArticles = articlesData.filter(article => 
                article.category === 'oilgas' || 
                article.category === 'petroleo' || 
                article.category === 'petroleo-gas' ||
                article.tags?.includes('petroleo') || 
                article.tags?.includes('gas') || 
                article.tags?.includes('oil') || 
                article.tags?.includes('gas')
            );
            
            console.log(`Encontrados ${oilGasArticles.length} artigos no localStorage`);
            
            // Se h√° artigos para mostrar e ainda n√£o carregamos do Supabase
            if (oilGasArticles.length > 0 && !document.querySelector('#recent-articles-container .article-from-supabase')) {
                // Ordenar por data (mais recentes primeiro)
                oilGasArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // Mostrar at√© 4 artigos mais recentes
                const recentArticles = oilGasArticles.slice(0, 4);
                displayArticles(recentArticles, false);
            }
        } catch (error) {
            console.error('Erro ao carregar artigos do localStorage:', error);
        }
    }

    /**
     * Exibe os artigos na p√°gina
     */
    function displayArticles(articles, fromSupabase = true) {
        const recentArticlesContainer = document.getElementById('recent-articles-container');
        const noArticlesMessage = document.getElementById('no-articles-message');
        
        if (!recentArticlesContainer || !noArticlesMessage) {
            console.error('Elementos do DOM n√£o encontrados');
            return;
        }
        
        // Se h√° artigos para mostrar
        if (articles && articles.length > 0) {
            // Esconder mensagem de "nenhum artigo"
            noArticlesMessage.style.display = 'none';
            
            // Limpar o container apenas se os artigos vierem do Supabase (fonte prim√°ria)
            if (fromSupabase) {
                recentArticlesContainer.innerHTML = '';
            }
            
            // Processar cada artigo
            articles.forEach(article => {
                // Verificar se o artigo j√° est√° sendo exibido (evitar duplica√ß√µes)
                const existingArticle = document.querySelector(`[data-article-id="${article.id}"]`);
                if (existingArticle) {
                    return; // Pular este artigo se j√° estiver exibido
                }
                
                const date = new Date(article.date);
                const formattedDate = date.toLocaleDateString('pt-BR');
                
                const articleElement = document.createElement('div');
                articleElement.className = 'list-group-item';
                
                // Adicionar classes e atributos para identifica√ß√£o
                if (fromSupabase) {
                    articleElement.classList.add('article-from-supabase');
                } else {
                    articleElement.classList.add('article-from-localstorage');
                }
                
                // Adicionar ID do artigo como atributo de dados
                articleElement.setAttribute('data-article-id', article.id || `local-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`);
                
                // Criar e adicionar o conte√∫do do artigo
                articleElement.innerHTML = `
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">${article.title || 'Sem t√≠tulo'}</h5>
                        <small class="text-muted">${formattedDate}</small>
                    </div>
                    <p class="mb-1">${article.abstract?.substring(0, 120) || 'Sem resumo dispon√≠vel'}...</p>
                    <div class="mt-2">
                        <a href="${article.file_link || '#'}" class="btn btn-sm btn-outline-primary" target="_blank">
                            <i class="bi bi-file-earmark-text"></i> Ler artigo
                        </a>
                        ${article.subcategory ? `<span class="badge bg-info ms-2">${article.subcategory}</span>` : ''}
                    </div>
                `;
                
                recentArticlesContainer.appendChild(articleElement);
            });
            
            // Atualizar contadores de artigos
            updateCategoryCounts();
        } else if (recentArticlesContainer.childElementCount === 0) {
            // Mostrar mensagem de "nenhum artigo" apenas se n√£o houver nenhum artigo
            noArticlesMessage.style.display = 'block';
        }
    }

    /**
     * Atualiza os contadores de artigos nas categorias
     */
    function updateCategoryCounts() {
        try {
            // Obter dados do Supabase
            if (supabase) {
                // Buscar contagens para cada categoria
                supabase
                    .from('articles')
                    .select('category', { count: 'exact', head: true })
                    .eq('category', 'petroleo-gas')
                    .then(({ count }) => {
                        // Atualizar contador na UI
                        const publicationsCounter = document.querySelector('a[href="publications.html"] + .badge');
                        if (publicationsCounter) {
                            publicationsCounter.textContent = count || '0';
                        }
                    })
                    .catch(error => {
                        console.error('Erro ao obter contagem de artigos:', error);
                    });
            }
        } catch (error) {
            console.error('Erro ao atualizar contadores:', error);
        }
    }
    </script>
</body>
</html>